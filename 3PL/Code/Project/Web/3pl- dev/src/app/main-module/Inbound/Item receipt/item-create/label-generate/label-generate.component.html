<div class="card  border-0 bg-white " style="overflow: hidden;">
  <div mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle
    class="d-flex justify-content-between align-items-center header_colour text-white p-2">
    <h6 class="my-auto">GR Release - {{this.data.line.goodsReceiptNo}}</h6>
    <mat-icon class="text-white" mat-dialog-close>close</mat-icon>
  </div>
  <mat-tab-group [(selectedIndex)]="selectedIndex" (selectedTabChange)="tabChanged($event)">
    <mat-tab class="mx-2" label="Part Details" *ngIf="this.data.pageflow != 'Print'">
      <div class="row scroll mx-0 mt-2 ">
        <div class="col-4 mt-1">
          <div class="form-group mb-0">
            <label for="inputEmail4" class="mb-0">Part No</label>
            <mat-form-field class="mb-0 w-100 " appearance="outline">
              <input matInput placeholder="Enter" disabled [value]="this.data.line.itemCode">
            </mat-form-field>
          </div>
        </div>
        <div class="col-4 mt-1">
          <div class="form-group mb-0">
            <label for="inputEmail4" class="mb-0">Item Description</label>
            <mat-form-field class="mb-0 w-100 " appearance="outline">
              <input matInput placeholder="Enter" disabled [value]="this.data.line.itemDescription">
            </mat-form-field>
          </div>
        </div>
        <div class="col-4 mt-1">
          <div class="form-group mb-0">
            <label for="inputEmail4" class="mb-0">Mfr Name</label>
            <mat-form-field class="mb-0 w-100 " appearance="outline">
              <input matInput placeholder="Enter" disabled [value]="this.data.line.manufacturerName">
            </mat-form-field>
          </div>
        </div>
        <div class="col-4 mt-1">
          <div class="form-group mb-0">
            <label for="inputEmail4" class="mb-0 required">Barcode</label>
            <mat-form-field class="mb-0 w-100 " appearance="outline">
              <input matInput disabled placeholder="Enter" [value]="this.data.line.partner_item_barcode"
                [(ngModel)]="this.data.line.partner_item_barcode">
              <button matSuffix mat-icon-button (click)="searchBarcode()">
                <mat-icon>search</mat-icon>
              </button>
            </mat-form-field>
          </div>
        </div>
        <div class="col-4 mt-1">
          <div class="form-group mb-0">
            <label for="inputEmail4" class="mb-0 required">Bin Location</label>
            <mat-form-field *ngIf="!showDropdown1" class="form-group input_field mb-0 w-100" appearance="outline">
              <input matInput placeholder="Enter" [(ngModel)]="this.data.line.interimStorageBin" disabled>
              <button matSuffix mat-icon-button (click)="showDropdown()">
                <mat-icon>edit</mat-icon>
              </button>
            </mat-form-field>


            <p-dropdown *ngIf="showDropdown1" placeholder="Select" [filter]="true" class="w-100"
              [options]="multiselectStorageList" appendTo="body" [resetFilterOnHide]="true" [(ngModel)]="this.data.line.interimStorageBin"
              name="product" [style]="{'width': '100%'}" [panelStyle]="{'width':'20%'}"
              (onFilter)="onStorageType($event)"> </p-dropdown>

          </div>
        </div>
        <div class="col-4 mt-1">
          <div class="form-group mb-0">
            <label for="inputEmail4" class="mb-0 required">Accepted Qty</label>
            <mat-form-field class="mb-0 w-100 " appearance="outline">
              <input matInput type="number" placeholder="Enter" (keyup)="getVariance()"
                [(ngModel)]="this.data.line.acceptedQty">
            </mat-form-field>
          </div>
        </div>
        <div class="col-4 mt-1">
          <div class="form-group mb-0">
            <label for="inputEmail4" class="mb-0">Rejected Qty</label>
            <mat-form-field class="mb-0 w-100 " appearance="outline">
              <input matInput type="number" placeholder="Enter" (keyup)=" getVariance()"
                [(ngModel)]="this.data.line.damageQty">
            </mat-form-field>
          </div>
        </div>

        <div class="col-4 mt-1">
          <div class="form-group mb-0">
            <label for="inputEmail4" class="mb-0">Variance Qty</label>
            <mat-form-field class="mb-0 w-100 " appearance="outline">
              <input matInput type="number" placeholder="Enter" disabled [(ngModel)]="this.data.line.varianceQty">
            </mat-form-field>
          </div>
        </div>
      </div>
    </mat-tab>
    <mat-tab class="mx-2" label="Qty & CBM Details" *ngIf="this.data.pageflow != 'Print'"> 
      <div class="d-flex justify-content-end mt-2">
        <mat-slide-toggle
        class="example-margin" color="primary"  [(ngModel)]="printLabel"> Generate Label
        </mat-slide-toggle>
      </div>
      <div class="row scroll mx-0 mt-2 ">
        <table class="table table-striped sticky table-bordered">
          <thead>
            <tr>
              <th scope="col" style="width: 20%;">Value</th>
              <th scope="col" style="width: 15%;">Accepted</th>
              <th scope="col" style="width: 15%;">Rejected</th>
              <th scope="col">Variance</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td scope="row">Qty</td>
              <td>
                <input matInput placeholder="Enter" [value]="this.data.line.acceptedQty" (keyup)="getVariance()"
                [(ngModel)]="this.data.line.acceptedQty">
              </td>
              <td>
                <input matInput placeholder="Enter" [value]="this.data.line.damageQty" (keyup)="getVariance()"
                [(ngModel)]="this.data.line.damageQty">
              </td>
              <td>
                <input matInput placeholder="Enter" [value]="this.data.line.varianceQty" disabled
                [(ngModel)]="this.data.line.varianceQty">
              </td>
            </tr>
            <tr>
              <td scope="row">Length</td>
              <td>
                <input matInput disabled [value]="this.data.line.length" 
                [(ngModel)]="this.data.line.length">
              </td>
              <td>
                <input matInput disabled [value]="this.data.line.length" 
                [(ngModel)]="this.data.line.length">
              </td>
              <td></td>
            </tr>
            <tr>
              <td scope="row">width</td>
              <td>
                <input matInput disabled [value]="this.data.line.width"
                [(ngModel)]="this.data.line.width">
              </td>
              <td>
                <input matInput disabled [value]="this.data.line.width"
                [(ngModel)]="this.data.line.width">
              </td>
              <td></td>
            </tr>
            <tr>
              <td scope="row">Height</td>
              <td>
                <input matInput disabled [value]="this.data.line.height"
                [(ngModel)]="this.data.line.height">
              </td>
              <td>
                <input matInput disabled [value]="this.data.line.height"
                [(ngModel)]="this.data.line.height">
              </td>
              <td></td>
            </tr>
            <tr>
              <td scope="row">CBM/Qty</td>
              <td>
                <input matInput disabled [value]="this.data.line.cbmQty"
                [(ngModel)]="this.data.line.cbmQty">
              </td>
              <td>
                <input matInput disabled [value]="this.data.line.cbmQty"
                [(ngModel)]="this.data.line.cbmQty">
              </td>
              <td></td>
            </tr>
            <tr>
              <td scope="row">CBM</td>
              <td>
                <input matInput disabled [value]="this.data.line.cbm"
                [(ngModel)]="this.data.line.acceptedCbmQty">
              </td>
              <td>
                <input matInput disabled [value]="this.data.line.cbm"
                [(ngModel)]="this.data.line.rejectedCbmQty">
              </td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </mat-tab>
    <mat-tab class="mx-2" label="Barcode Details" *ngIf="printLabel">
      <div class="scroll">
        <div *ngIf="this.data.line.acceptedQty != null && this.data.line.acceptedQty != '' && this.data.line.acceptedQty != 0">
          <div class="d-flex justify-content-between align-items-center mt-3">
            <h6 for="inputEmail4" class="mb-0 font-weigt-bold mx-3">Accepted Qty</h6>
            <button *ngIf="this.selectedIndex ==  2" mat-raised-button matTooltip="Barcode Preview" class="bg-orange px-4 text-white mx-1"
            (click)="printLabel1('preview');">
            <mat-icon class="">visibility</mat-icon>
          </button>
          </div>
          <div class="row  mx-0 mt-2 ">
            <div class="col-4 mt-1">
              <div class="form-group mb-0">
                <label for="inputEmail4" class="mb-0 required">Barcode</label>
                <mat-form-field class="mb-0 w-100 " appearance="outline">
                  <input matInput placeholder="Enter" [value]="this.data.line.partner_item_barcode1"
                    [(ngModel)]="this.data.line.partner_item_barcode1">
                </mat-form-field>
              </div>
            </div>
            <div class="col-4 mt-1">
              <div class="form-group mb-0">
                <label for="inputEmail4" class="mb-0">No of Label</label>
                <mat-form-field class="mb-0 w-100 " appearance="outline">
                  <input matInput placeholder="Enter" [value]="this.data.line.noOfAcceptedLabel"
                    [(ngModel)]="this.data.line.noOfAcceptedLabel">
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="this.data.line.damageQty != null && this.data.line.damageQty != '' && this.data.line.damageQty != 0">
          <h6 for="inputEmail4" class="mb-0 mt-3 font-weigt-bold mx-3">Rejected Qty</h6>
          <div class="row  mx-0 mt-2 ">
            <div class="col-4 mt-1">
              <div class="form-group mb-0">
                <label for="inputEmail4" class="mb-0 required">Barcode</label>
                <mat-form-field class="mb-0 w-100 " appearance="outline">
                  <input matInput placeholder="Enter" [value]="this.data.line.partner_item_barcode1"
                    [(ngModel)]="this.data.line.partner_item_barcode1">
                </mat-form-field>
              </div>
            </div>
            <div class="col-4 mt-1">
              <div class="form-group mb-0">
                <label for="inputEmail4" class="mb-0">No of Label</label>
                <mat-form-field class="mb-0 w-100 " appearance="outline">
                  <input matInput placeholder="Enter" [value]="this.data.line.noOfDamageLabel"
                    [(ngModel)]="this.data.line.noOfDamageLabel">
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>
    </mat-tab>
  
  </mat-tab-group>



  <div class="d-flex justify-content-center mr-3 mb-1 pb-2">
    <!-- <button mat-raised-button mat-dialog-close class=" bg-red text-white mx-1">
      <mat-icon class="">close</mat-icon> Cancel
    </button> -->
    <button *ngIf="this.selectedIndex != 0" mat-raised-button (click)="previousStep()" class=" bg-red text-white mx-1">
      <mat-icon class="">arrow_back_ios</mat-icon> Back
    </button>
    <button *ngIf="this.printed" mat-raised-button (click)="submitNew()"
      class="bg-darkblue text-white mx-1">
      <mat-icon class="">done</mat-icon> Confirm
    </button>
    <button *ngIf="this.selectedIndex != 0 && !this.printLabel" mat-raised-button (click)="submit()"
    class="bg-darkblue text-white mx-1">
    <mat-icon class="">done</mat-icon> Confirm
  </button>
  <button  *ngIf="this.selectedIndex == 0 || (this.selectedIndex == 1 && this.printLabel)" mat-raised-button (click)="nextStep()" class=" bg-darkblue text-white mx-1">
      <mat-icon class="">arrow_forward_ios</mat-icon> Next
    </button>
    <button *ngIf="this.selectedIndex ==  2" mat-raised-button class="bg-yellow px-4 text-white mx-1"
      (click)="printLabel1('print');">
      <mat-icon class="">print</mat-icon> Print
    </button>
  </div>
</div>
