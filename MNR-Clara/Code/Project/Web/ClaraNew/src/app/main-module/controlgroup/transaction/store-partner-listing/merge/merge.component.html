<div class="d-flex  align-items-center justify-content-between mx-1 my-2 mb-2">
  <div class="ps-3">
    <nav aria-label="breadcrumb mb-0">
      <ol class="breadcrumb mb-0 d-flex align-items-center">
        <li class="breadcrumb-item mb-0 ms-3">
          <a>
            <mat-icon class="text-secondary align-middle">home</mat-icon>
          </a>
        </li>
        <div class="divider mx-3 border-end"></div>
        <li class="breadcrumb-item mb-0 active " aria-current="page">Controlled Groups</li>
        <li class="breadcrumb-item mb-0 active " aria-current="page">Store Partner Listing</li>
        <li class="breadcrumb-item mb-0 active " aria-current="page">Transfer</li>
      </ol>
    </nav>
  </div>
  <div class="pe-2 me-1 d-flex justify-content-between align-items-end">
    <div [hidden]="isShowDiv"> <input matInput class="form-control filter_button mx-2 border-bottom"
        placeholder="Filter" style="width:90%"></div>
    <div [ngClass]="showFloatingButtons == true ? 'floating-pane-active' : 'floating-pane-deactive'" class="button-row">
      <button disabled  mat-mini-fab *ngIf="showFloatingButtons == true" class=" disabled floating-buttons bg-pink text-white mx-2"
        matTooltip="Download Excel">
        <mat-icon class="">download</mat-icon>
      </button>
      <button disabled  mat-mini-fab *ngIf="showFloatingButtons == true" class=" disabled floating-buttons bg-yellow1 text-white mx-2"
        matTooltip="Delete">
        <!---->
        <mat-icon class="">delete</mat-icon>
      </button>
      <button  disabled mat-mini-fab *ngIf="showFloatingButtons == true" class=" disabled floating-buttons text-white mx-2 bg-lightblue"
        matTooltip="Display">
        <mat-icon class="">search</mat-icon>
      </button>
      <button disabled  mat-mini-fab *ngIf="showFloatingButtons == true" class=" disabled floating-buttons primary1 text-white mx-2 me-3"
        matTooltip="Edit" matTooltip="Edit">
        <mat-icon class="">edit</mat-icon>
      </button>
      <button disabled  mat-mini-fab (click)="toggleFloat()" class=" disabled mx-2 text-white action-button"
        [ngClass]="{'bg-yellow' : toggle, 'purple': !toggle}">
        <mat-icon>{{icon}}</mat-icon>Options
      </button>
      <button disabled  mat-mini-fab class=" disabled bg-darkblue text-white mx-2 action-button">
        <mat-icon class="">add</mat-icon> New
      </button>
      <button disabled  mat-mini-fab class=" disabled text-white mx-2 action-button bg-red" type="button" mat-button
        (click)="drawer.toggle()">
        <mat-icon class="">search</mat-icon> Search
      </button>
    </div>
  </div>
</div>
<mat-drawer-container class="example-container" autosize>
  <mat-drawer #drawer class="example-sidenav " mode="over" position="end">
    <div class="card-header bg-blue text-white d-flex justify-content-between align-items-center">
      <h3 class="my-auto mb-0">Search Parameter</h3>
      <i mat-dialog-close class="bi bi-x-lg px-2" (click)="drawer.toggle()"></i>
    </div>
  </mat-drawer>
  <div class="example-sidenav-content">
    <div class="ms-3 me-3 px-1 mt-1 scroll1">
      <div class="row">
        <div class="col-3">
          <div class="d-flex flex-column">
            <p class="mb-0 py-0 text-black ">Group ID</p>
            <p-dropdown placeholder="Select"
              class="w-100 my-1 mb-2"  [filter]="true" [disabled]="true" appendTo="body"  [(ngModel)]="sourceGroup" [options]="multiGroupList" [style]="{'width': '100%'}"
              [panelStyle]="{'width':'20%'}"></p-dropdown>
          </div>
        </div>
        <div class="col-3">
          <button mat-stroked-button class="mt-3 py-1 hoverbutton" (click)="merge()" *ngIf="!showSave">
            <mat-icon class="">double_arrow</mat-icon> Transfer
          </button>
        </div>
        <div class="col-3">
            <div class="d-flex flex-column">
              <p class="mb-0 py-0 text-black ">Group ID</p>
              <p-dropdown placeholder="Select" #groupId (onChange)="groupSelected1(groupId.selectedOption)"
                class="w-100 my-1 mb-2" [filter]="true" [(ngModel)]="targetGroup" appendTo="body" [options]="multiGroupList1" [style]="{'width': '100%'}"
                [panelStyle]="{'width':'20%'}"></p-dropdown>
            </div>
          </div>
      </div>
      <div class="row">
        <div class="col-6">
          <table mat-table [dataSource]="dataSource" matSort matSortActive="versionNumber" matSortDirection="desc"
            class=" w-100">
            <!-- Checkbox Column -->
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                <mat-checkbox (change)="$event ? masterToggle() : null"
                  [checked]="selection.hasValue() && isAllSelected()" disabled
                  [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                  [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                </mat-checkbox>
              </td>
            </ng-container>

                      <!-- Symbol Column -->
          <ng-container matColumnDef="clientDoc">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Co-Owner </th>
            <td mat-cell *matCellDef="let element">
              <button   (click)="op1.toggle($event); showClient(element)" mat-icon-button>
                <mat-icon class="text-secondary">person</mat-icon>
              </button>
            </td>
          </ng-container>

            <ng-container matColumnDef="storeId">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Store ID </th>
              <td mat-cell *matCellDef="let element"> {{element.storeId}} </td>
            </ng-container>
            <!-- Symbol Column -->
            <ng-container matColumnDef="storeName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Store Name</th>
              <td mat-cell *matCellDef="let element"> {{element.storeName}} </td>
            </ng-container>


            <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;">
            </tr>
          </table>
        </div>
        <div class="col-6">
          <table mat-table [dataSource]="dataSource1" matSort matSortActive="versionNumber" matSortDirection="desc"
            class=" w-100">

            
                      <!-- Symbol Column -->
          <ng-container matColumnDef="clientDoc">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Co-Owner </th>
            <td mat-cell *matCellDef="let element">
              <button   (click)="op1.toggle($event); showClient(element)" mat-icon-button>
                <mat-icon class="ml-3 
                text-secondary">person</mat-icon>
              </button>
            </td>
          </ng-container>

            <!-- Checkbox Column -->
            <ng-container matColumnDef="storeId">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Store ID </th>
              <td mat-cell *matCellDef="let element"> {{element.storeId}} </td>
            </ng-container>
            <!-- Symbol Column -->
            <ng-container matColumnDef="storeName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Store Name</th>
              <td mat-cell *matCellDef="let element"> {{element.storeName}} </td>
            </ng-container>


            <tr mat-header-row *matHeaderRowDef="displayedColumns1;sticky: true;"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns1;let element" [ngClass]="{highlight1: element.referenceField10 == true }">
            </tr>
          </table>
        </div>
      </div>
      <div class="d-flex justify-content-center align-items-center py-2 fixed-bottom ">
        <button mat-raised-button color="warn" mat-dialog-close class="mx-2" (click)="back()"> <i
            class="bi bi-x me-1 font-size-1_5rem"></i>Cancel</button>
        <button mat-raised-button class="mx-2 bg-blue text-white" (click)="submit()" *ngIf="showSave">
          <i class="bi bi-check2 me-1 font-size-1_5rem"></i>
          Save</button>
      </div>
    </div>
  </div>
</mat-drawer-container>



<p-overlayPanel #op1>
  <ng-template pTemplate>
      <div *ngFor="let element of clientList">
        <table class="table table-striped table-sm">
          <thead style="font-size: 12px;" class="bg-blue text-white">
            <tr>
              <th scope="col" class="py-2">Co-Owner</th>
              <th scope="col" class="py-2">Percentage</th>
            </tr>
          </thead>
          <tbody style="font-size: 12px;">
            <tr *ngIf="element.coOwnerName1">
              <td>{{element.coOwnerId1 != null ? element.coOwnerId1 + ' - ' + element.coOwnerName1 : ''}}</td>
              <td>{{element.coOwnerPercentage1}}</td>
            </tr>
            <tr *ngIf="element.coOwnerName2">
              <td>{{element.coOwnerId2 != null ? element.coOwnerId2 + ' - ' + element.coOwnerName2 : ''}}</td>
              <td>{{element.coOwnerPercentage2}}</td>
            </tr>
            <tr *ngIf="element.coOwnerName3">
              <td>{{element.coOwnerId3 != null ? element.coOwnerId3 + ' - ' + element.coOwnerName3 : ''}}</td>
              <td>{{element.coOwnerPercentage3}}</td>
            </tr>
            <tr *ngIf="element.coOwnerName4">
              <td>{{element.coOwnerId4 != null ? element.coOwnerId4 + ' - ' + element.coOwnerName4 : ''}}</td>
              <td>{{element.coOwnerPercentage4}}</td>
            </tr>
            <tr *ngIf="element.coOwnerName5">
              <td>{{element.coOwnerId5 != null ? element.coOwnerId5 + ' - ' + element.coOwnerName5 : ''}}</td>
              <td>{{element.coOwnerPercentage5}}</td>
            </tr>
            <tr *ngIf="element.coOwnerName6">
              <td>{{element.coOwnerId6 != null ? element.coOwnerId6 + ' - ' + element.coOwnerName6 : ''}}</td>
              <td>{{element.coOwnerPercentage6}}</td>
            </tr>
            <tr *ngIf="element.coOwnerName7">
              <td>{{element.coOwnerId7 != null ? element.coOwnerId7 + ' - ' + element.coOwnerName7 : ''}}</td>
              <td>{{element.coOwnerPercentage7}}</td>
            </tr>
            <tr *ngIf="element.coOwnerName8">
              <td>{{element.coOwnerId8 != null ? element.coOwnerId8 + ' - ' + element.coOwnerName8 : ''}}</td>
              <td>{{element.coOwnerPercentage8}}</td>
            </tr>
            <tr *ngIf="element.coOwnerName9">
              <td>{{element.coOwnerId9 != null ? element.coOwnerId9 + ' - ' + element.coOwnerName9 : ''}}</td>
              <td>{{element.coOwnerPercentage9}}</td>
            </tr>
            <tr *ngIf="element.coOwnerName10">
              <td>{{element.coOwnerId10 != null ? element.coOwnerId10 + ' - ' + element.coOwnerName10 : ''}}</td>
              <td>{{element.coOwnerPercentage10}}</td>
            </tr>
          </tbody>
          <tfoot style="font-size: 12px;">
            <tr>
              <td >Total</td>
              <td>{{totalPercentage}}</td>
            </tr>
          </tfoot>
        </table>
      </div>
  </ng-template>
</p-overlayPanel>